---
layout: post
title: js基础——this
description: >
 this在js中是一个关键字，代表正在调用的当前对象，它是一个活动的不确定的，所以会在有些地方出现意 想不到的效果，一句话讲出this指向问题的话就是，this指向的是点前的对象
author: author1
image: https://cdn.jsdelivr.net/gh/zouzenghu/cdn@7.15/assets/img/ecmascript/127c3b080361aca96db1da7cc1ccd301 (1).jpg
noindex: true
---

this ——javascript中的关键字代表着当前正在调用对象，因为this是不确定的，在一些场合下this的指向也会出现变化，如DOM 事件中指向点击的当前对象，函数中指向window，对象中指向当前正在调用的点前对象，它就像是一个水性杨花的女人，一个游走在花丛中的男人一样，时刻挑逗着我们的心情，下面就几种常见的情景记录下this的变化。

## 何时使用this

* 关于什么时候使用this，在我们使用oop编程时会涉及到this，事件绑定中会涉及到this，重写原型方法时会遇上this，所以只要涉及到对象都会用的到this，不加this的默认在作用域链中找，而加this了则在原型链当中找
  
  ![img this]({{ site.cdnUrl }}assets/img/ecmascript/thiszuoyongyu.png)

## 如何改变this

* 改变this的指向有三种方式，call，apply，bind
  
  * call，apply，bind
    
    ```javascript
    //call的使用
    //call改变this指向，并立即执行，第一个参数为this，后面参数为目标参数
    let obj={
        name:'小明',
        age:18,
        car:'宝马'
    }
    function fun(val){
        console.log(val);//牛x
        console.log(this.name);//小明
        console.log(this.age);//18
        console.log(this.car);//宝马
    }
    fun.call(obj,'牛x');
    //apply的使用
    //apply改变this指向,并打撒数组传入目标对象中，（注意只能拍扁一层）立即执行
    //为什么这里this传入的是null呢，因为max并不是根据this来取值，而是我们传入什参数就根据这个参数执行，它的当前的this对象是Math 
    Math.max.apply(null,[1,2,3,5])
    //bind的使用
    //bind永久绑定参数和this，并返回一个新对象，并不是立即执行
    let newObj=fun.bind(obj,'参数')
    
    ```

## 常见的场景下this的指向

* 事件中
  
  ```javascript
  elem.onclick=function(){
      //指向的是正在点击的当前对象
      console.log(this);   
  }
  ```

* 函数中
  
  ```javascript
  //在严格模式下window会变为undefined
  //自调函数中this指向window
  (function(){
      //this->window
      console.log(this)
  })
  //指向得的是window
  function fun(){
      //this->window
      console.log(this)
  }
  //指向是当前执行环境
  //这种es6中的新箭头函this指向的就是定义这个函数的当前执行环境
  //而且不会随着调用而改变
  //一经定义就不会随着调用而轻易改变
  let fun= ()=<{
      console.log(this)
  }
  //小栗子
  var obj={
     name:'Tom',
     init:function(){
        let js=()=>{
            console.log(this.name);
         }
         return js;
     }
  }
  let test=obj.init();
      test();//Tom
      
  
  
  ```

* 对象中
  
  ```javascript
  
  ```

* 特殊情况
  
  ```javascript
  
  ```

## 小知识点

## 总结
